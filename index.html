<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>TERMINAT TRADER â€“ Signaux Deriv</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f9f9f9; color: #333; margin:0; padding:20px;}
    header { text-align:center; padding:20px;}
    header img { height:60px; }
    header h1 { margin:10px 0; font-size:2em; color:#0088cc; }
    .account { background:#fff; border:1px solid #ddd; border-radius:10px; padding:15px; max-width:600px; margin: auto 0 30px;}
    .timeframe { margin:10px 0; }
    .timeframe select { padding:8px; font-size:16px;}
    .markets-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); gap:15px; margin-bottom:30px;}
    .market-btn { background:#0088cc;color:#fff;padding:14px;border:none;border-radius:10px;font-size:16px;cursor:pointer;transition:background .3s;}
    .market-btn:hover { background:#0074aa; }
    .symbol-list { display:none; margin-bottom:30px;}
    .symbol-btn { background:#ffb703;color:#000;padding:10px;border:none;border-radius:8px;font-size:14px;cursor:pointer;margin:4px;}
    .motivation { text-align:center; font-style:italic; margin-top:30px; }
  </style>
</head>
<body>
  <header>
    <img src="https://cdn-icons-png.flaticon.com/512/1884/1884899.png" alt="Logo Trading">
    <h1>TERMINAT TRADER</h1>
  </header>

  <div class="account">
    <h2>ðŸ’¼ Mon Compte</h2>
    <p>Solde : <strong id="balance">Chargement...</strong></p>
    <p>DÃ©pÃ´ts : <strong id="deposits">0</strong></p>
    <p>Transactions : <strong id="transactions">0</strong></p>
    <div class="timeframe">
      Timeframe :
      <select id="timeframeSelect">
        <option>1 min</option><option>2 min</option><option>3 min</option><option>4 min</option><option>5 min</option><option>1 h</option>
      </select>
    </div>
  </div>

  <div class="markets-grid" id="marketsGrid">
    <!-- Boutons marchÃ©s -->
  </div>

  <div class="symbol-list" id="symbolList">
    <!-- Boutons symboles dâ€™un marchÃ© -->
  </div>

  <div class="motivation">
    <p><strong>"La discipline est le pont entre le rÃªve et la rÃ©ussite."</strong></p>
    <p>Proverbe : "Qui nâ€™ose pas ne gagne jamais."</p>
    <p>ðŸ“– Verset : Philippiens 4:13 â€“ "Je puis tout par celui qui me fortifie."</p>
  </div>

  <script>
    const derivToken = "Wb2FadXfUtQGotA";
    const telegramToken = "AAFXkzkSk0Xx2R_kaFaIrBFq_krn0CNwxbk";
    const telegramId = "8036895177";
    const appId = 1089;

    const ws = new WebSocket(`wss://ws.derivws.com/websockets/v3?app_id=${appId}`);

    const balanceEl = document.getElementById("balance");
    const marketsGrid = document.getElementById("marketsGrid");
    const symbolList = document.getElementById("symbolList");

    let grouped = {};

    ws.onopen = () => {
      ws.send(JSON.stringify({ authorize: derivToken }));
      ws.send(JSON.stringify({ active_symbols: "brief", product_type: "basic" }));
    };

    ws.onmessage = msg => {
      const data = JSON.parse(msg.data);
      if(data.msg_type==="authorize" && data.authorize){
        balanceEl.innerText = data.authorize.balance + " USD";
      }
      if(data.active_symbols){
        grouped = data.active_symbols.reduce((acc,sym)=>{
          acc[sym.market_display_name] = acc[sym.market_display_name] || [];
          acc[sym.market_display_name].push(sym);
          return acc;
        },{});
        renderMarkets();
      }
    };

    function renderMarkets(){
      marketsGrid.innerHTML = "";
      for(const m in grouped){
        const btn = document.createElement("button");
        btn.className = "market-btn";
        btn.textContent = m;
        btn.onclick = ()=> showSymbols(m);
        marketsGrid.appendChild(btn);
      }
    }

    function showSymbols(market){
      symbolList.style.display = "block";
      symbolList.innerHTML = `<h3>Actifs pour ${market}</h3>`;
      grouped[market].forEach(sym=>{
        const b = document.createElement("button");
        b.className = "symbol-btn";
        b.textContent = sym.display_name;
        b.onclick = ()=> alert("Afficher analyse " + sym.display_name);
        symbolList.appendChild(b);
      });
      window.scrollTo(0,document.body.scrollHeight);
    }
  </script>
</body>
</html>
